<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: helpers/transformer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: helpers/transformer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const _ = require('lodash');

/**
 * Returns vehicle attributes according to smart car specs
 * @param {object} response - The response object from GM api
 */
const vehicleResponseTransformer = (response) => {
  const uncleanResponseData = JSON.parse(response).data;
  const fourDoorSedanTruthValue = JSON.parse(uncleanResponseData.fourDoorSedan.value.toLowerCase());
  const data = {};
  data.vin = uncleanResponseData.vin.value;
  data.color = uncleanResponseData.color.value;
  data.doorCount = (fourDoorSedanTruthValue === true) ? 4 : 2;
  data.driveTrain = uncleanResponseData.driveTrain.value;
  return data;
};

/**
 * Returns door status of a vehicle according to smart car specs
 * @param {object} response - The response object from GM api
 */
const doorStatusResponseTransformer = (response) => {
  const uncleanResponseData = JSON.parse(response).data.doors.values;

  const data = [];
  _.forEach(uncleanResponseData, (obj) => {
    const door = {};
    const status = JSON.parse(obj.locked.value.toLowerCase());
    door.locked = status;
    door.location = obj.location.value;
    data.push(door);
  });
  return data;
};

/**
 * Returns fuel levels of a vehicle according to smart car specs
 * @param {object} response - The response object from GM api
 */
const fuelLevelsResponseTransformer = (response) => {
  const uncleanResponseData = JSON.parse(response);
  const data = {};
  const isValueNumber = _.parseInt(uncleanResponseData.data.tankLevel.value);
  data.percent = isValueNumber &amp;&amp; isValueNumber != null ?
                  _.parseInt(uncleanResponseData.data.tankLevel.value) : 0;
  return data;
};


/**
 * Returns battery levels of a vehicle according to smart car specs
 * @param {object} response - The response object from GM api
 */
const batteryResponseTransformer = (response) => {
  const uncleanResponseData = JSON.parse(response);
  const data = {};
  const isValueNumber = _.parseInt(uncleanResponseData.data.batteryLevel.value);

  data.percent = isValueNumber &amp;&amp; isValueNumber != null ?
                  _.parseInt(uncleanResponseData.data.batteryLevel.value) : 0;
  return data;
};


/**
 * Returns engine status after action occurs on a vehicle according to smart car specs
 * @param {object} response - The response object from GM api
 */
const engineResponseTransformer = (response) => {
  const reponsesForGM = {
    EXECUTED: 'success',
    FAILED: 'error',
  };

  const uncleanResponseData = JSON.parse(response);
  const data = {};
  data.status = reponsesForGM[uncleanResponseData.actionResult.status];
  return data;
};


module.exports = {
  vehicleResponseTransformer,
  doorStatusResponseTransformer,
  fuelLevelsResponseTransformer,
  batteryResponseTransformer,
  engineResponseTransformer,
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#batteryResponseTransformer">batteryResponseTransformer</a></li><li><a href="global.html#doorStatusResponseTransformer">doorStatusResponseTransformer</a></li><li><a href="global.html#engineResponseTransformer">engineResponseTransformer</a></li><li><a href="global.html#fuelLevelsResponseTransformer">fuelLevelsResponseTransformer</a></li><li><a href="global.html#getVehiclesBatteryLevel">getVehiclesBatteryLevel</a></li><li><a href="global.html#getVehiclesById">getVehiclesById</a></li><li><a href="global.html#getVehiclesDoorsStatus">getVehiclesDoorsStatus</a></li><li><a href="global.html#getVehiclesFuelLevel">getVehiclesFuelLevel</a></li><li><a href="global.html#setVehiclesEngineState">setVehiclesEngineState</a></li><li><a href="global.html#vehicleResponseTransformer">vehicleResponseTransformer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.2</a> on Wed Jul 12 2017 23:27:56 GMT-0500 (CDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
